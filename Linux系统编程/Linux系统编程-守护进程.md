### 创建守护进程模型

**生存期长**，常在系统引导装入时启动，仅在系统关闭时才终止； **没有控制终端，在后台运行**。

1. 创建子进程，父进程退出

2. 在子进程中创建新会话

   setsid()函数；使子进程完全独立出来，脱离控制

3. 改变当前目录为根目录

   chdir()函数；防止占用可卸载的文件系统；也可以换成其他路径

4. 重设文件权限掩码

   umask()函数；防止继承的文件创建屏蔽字拒绝某些权限；增加守护进程灵活性

5. 关闭文件描述符

   继承的打开文件不会用到，浪费系统资源，无法卸载

6. 开始执行守护进程核心工作

7. 守护进程退出处理程序模型



扩展了解：

通过nohup指令也可以达到守护进程创建的效果

